{
    "template": "member_tooltip",
    "description": "Hides the users profile tool tip if the person trying to view lacks permission.",
    "execution_order": 10,
    "enabled": true,
    "action": "str_replace",
    "find": "<div class=\"tooltip-content-inner\">\n\t<div class=\"memberTooltip {{ $user.Profile.banner_date ? 'memberTooltip--withBanner' : '' }}\">\n\t\t<xf:profilebanner user=\"$user\" size=\"m\" class=\"memberTooltip-header\" toggle=\"memberTooltip--withBanner\">\n\t\t\t<span class=\"memberTooltip-avatar\">\n\t\t\t\t<xf:avatar user=\"{$user}\" size=\"m\" notooltip=\"true\" />\n\t\t\t</span>\n\t\t\t<div class=\"memberTooltip-headerInfo\">\n\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t<div class=\"memberTooltip-headerAction\">\n\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t<!--[XF:header_action_start]-->\n\t\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t\t<xf:button class=\"button--link button--small menuTrigger\"\n\t\t\t\t\t\t\t\tdata-xf-click=\"menu\"\n\t\t\t\t\t\t\t\taria-label=\"{{ phrase('more_options') }}\"\n\t\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\t\taria-haspopup=\"true\">\n\t\t\t\t\t\t\t\t<xf:fa icon=\"fa-cog\" />\n\t\t\t\t\t\t\t</xf:button>\n\n\t\t\t\t\t\t\t<div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\">\n\t\t\t\t\t\t\t\t<div class=\"menu-content\">\n\t\t\t\t\t\t\t\t\t<h3 class=\"menu-header\">{{ phrase('moderator_tools') }}</h3>\n\t\t\t\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t\t\t\t\t<xf:macro id=\"member_macros::moderator_menu_actions\"\n\t\t\t\t\t\t\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\t\t\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</xf:if>\n\t\t\t\t\t\t<!--[XF:header_action_end]-->\n\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t</div>\n\t\t\t\t</xf:if>\n\n\t\t\t\t<h4 class=\"memberTooltip-name\">\n\t\t\t\t\t<span class=\"memberTooltip-nameWrapper\">\n\t\t\t\t\t\t<xf:username user=\"$user\" rich=\"true\" notooltip=\"true\" />\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<xf:if is=\"$user.hasViewableUsernameHistory()\">\n\t\t\t\t\t\t<a class=\"memberTooltip-nameChangeIndicator\"\n\t\t\t\t\t\t\tdata-xf-click=\"menu\"\n\t\t\t\t\t\t\tdata-xf-init=\"tooltip\"\n\t\t\t\t\t\t\ttitle=\"{{ phrase('username_changed')|for_attr }}\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\taria-label=\"{{ phrase('username_changed')|for_attr }}\"><xf:fa icon=\"fa-history\" /></a>\n\t\t\t\t\t\t<div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\"\n\t\t\t\t\t\t\tdata-href=\"{{ link('members/username-history', $user, {'menu': 1}) }}\"\n\t\t\t\t\t\t\tdata-load-target=\".js-usernameHistoryBody\">\n\t\t\t\t\t\t\t<div class=\"menu-content\">\n\t\t\t\t\t\t\t\t<h3 class=\"menu-header\">{{ phrase('previous_usernames') }}</h3>\n\t\t\t\t\t\t\t\t<div class=\"js-usernameHistoryBody\">\n\t\t\t\t\t\t\t\t\t<div class=\"menu-row\">\n\t\t\t\t\t\t\t\t\t\t{{ phrase('loading...') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\t\t\t\t</h4>\n\n\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t<div class=\"memberTooltip-banners\">\n\t\t\t\t\t\t<xf:contentcheck><xf:userbanners user=\"$user\" /></xf:contentcheck>\n\t\t\t\t\t</div>\n\t\t\t\t</xf:if>\n\n\t\t\t\t<div class=\"memberTooltip-blurbContainer\">\n\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t\t<xf:userblurb user=\"$user\" tag=\"div\" />\n\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\n\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t<dl class=\"pairs pairs--inline\">\n\t\t\t\t\t\t\t<dt>{{ phrase('joined') }}</dt>\n\t\t\t\t\t\t\t<dd><xf:date time=\"$user.register_date\" /></dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t\t<dl class=\"pairs pairs--inline\">\n\t\t\t\t\t\t\t\t<dt>{{ phrase('last_seen') }}</dt>\n\t\t\t\t\t\t\t\t<dd dir=\"auto\">\n\t\t\t\t\t\t\t\t\t<xf:contentcheck><xf:useractivity user=\"$user\" class=\"pairs--plainLabel\" /></xf:contentcheck>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</xf:profilebanner>\n\t\t<div class=\"memberTooltip-info\">\n\t\t\t<div class=\"memberTooltip-stats\">\n\t\t\t\t<div class=\"pairJustifier\">\n\t\t\t\t\t<xf:macro id=\"member_macros::member_stat_pairs\"\n\t\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<xf:if contentcheck=\"true\">\n\t\t\t<hr class=\"memberTooltip-separator\" />\n\n\t\t\t<div class=\"memberTooltip-actions\">\n\t\t\t<xf:contentcheck>\n\t\t\t\t<xf:macro id=\"member_macros::member_action_buttons\"\n\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t</xf:contentcheck>\n\t\t\t</div>\n\t\t</xf:if>\n\t</div>\n</div>",
    "replace": "<xf:if is=\"$hasPermission\">\n<div class=\"tooltip-content-inner\">\n\t<div class=\"memberTooltip {{ $user.Profile.banner_date ? 'memberTooltip--withBanner' : '' }}\">\n\t\t<xf:profilebanner user=\"$user\" size=\"m\" class=\"memberTooltip-header\" toggle=\"memberTooltip--withBanner\">\n\t\t\t<span class=\"memberTooltip-avatar\">\n\t\t\t\t<xf:avatar user=\"{$user}\" size=\"m\" notooltip=\"true\" />\n\t\t\t</span>\n\t\t\t<div class=\"memberTooltip-headerInfo\">\n\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t<div class=\"memberTooltip-headerAction\">\n\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t<!--[XF:header_action_start]-->\n\t\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t\t<xf:button class=\"button--link button--small menuTrigger\"\n\t\t\t\t\t\t\t\tdata-xf-click=\"menu\"\n\t\t\t\t\t\t\t\taria-label=\"{{ phrase('more_options') }}\"\n\t\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\t\taria-haspopup=\"true\">\n\t\t\t\t\t\t\t\t<xf:fa icon=\"fa-cog\" />\n\t\t\t\t\t\t\t</xf:button>\n\n\t\t\t\t\t\t\t<div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\">\n\t\t\t\t\t\t\t\t<div class=\"menu-content\">\n\t\t\t\t\t\t\t\t\t<h3 class=\"menu-header\">{{ phrase('moderator_tools') }}</h3>\n\t\t\t\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t\t\t\t\t<xf:macro id=\"member_macros::moderator_menu_actions\"\n\t\t\t\t\t\t\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\t\t\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</xf:if>\n\t\t\t\t\t\t<!--[XF:header_action_end]-->\n\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t</div>\n\t\t\t\t</xf:if>\n\n\t\t\t\t<h4 class=\"memberTooltip-name\">\n\t\t\t\t\t<span class=\"memberTooltip-nameWrapper\">\n\t\t\t\t\t\t<xf:username user=\"$user\" rich=\"true\" notooltip=\"true\" />\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<xf:if is=\"$user.hasViewableUsernameHistory()\">\n\t\t\t\t\t\t<a class=\"memberTooltip-nameChangeIndicator\"\n\t\t\t\t\t\t\tdata-xf-click=\"menu\"\n\t\t\t\t\t\t\tdata-xf-init=\"tooltip\"\n\t\t\t\t\t\t\ttitle=\"{{ phrase('username_changed')|for_attr }}\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\taria-label=\"{{ phrase('username_changed')|for_attr }}\"><xf:fa icon=\"fa-history\" /></a>\n\t\t\t\t\t\t<div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\"\n\t\t\t\t\t\t\tdata-href=\"{{ link('members/username-history', $user, {'menu': 1}) }}\"\n\t\t\t\t\t\t\tdata-load-target=\".js-usernameHistoryBody\">\n\t\t\t\t\t\t\t<div class=\"menu-content\">\n\t\t\t\t\t\t\t\t<h3 class=\"menu-header\">{{ phrase('previous_usernames') }}</h3>\n\t\t\t\t\t\t\t\t<div class=\"js-usernameHistoryBody\">\n\t\t\t\t\t\t\t\t\t<div class=\"menu-row\">\n\t\t\t\t\t\t\t\t\t\t{{ phrase('loading...') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\t\t\t\t</h4>\n\n\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t<div class=\"memberTooltip-banners\">\n\t\t\t\t\t\t<xf:contentcheck><xf:userbanners user=\"$user\" /></xf:contentcheck>\n\t\t\t\t\t</div>\n\t\t\t\t</xf:if>\n\n\t\t\t\t<div class=\"memberTooltip-blurbContainer\">\n\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t\t<xf:userblurb user=\"$user\" tag=\"div\" />\n\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\n\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t<dl class=\"pairs pairs--inline\">\n\t\t\t\t\t\t\t<dt>{{ phrase('joined') }}</dt>\n\t\t\t\t\t\t\t<dd><xf:date time=\"$user.register_date\" /></dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t\t<dl class=\"pairs pairs--inline\">\n\t\t\t\t\t\t\t\t<dt>{{ phrase('last_seen') }}</dt>\n\t\t\t\t\t\t\t\t<dd dir=\"auto\">\n\t\t\t\t\t\t\t\t\t<xf:contentcheck><xf:useractivity user=\"$user\" class=\"pairs--plainLabel\" /></xf:contentcheck>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</xf:profilebanner>\n\t\t<div class=\"memberTooltip-info\">\n\t\t\t<div class=\"memberTooltip-stats\">\n\t\t\t\t<div class=\"pairJustifier\">\n\t\t\t\t\t<xf:macro id=\"member_macros::member_stat_pairs\"\n\t\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<xf:if contentcheck=\"true\">\n\t\t\t<hr class=\"memberTooltip-separator\" />\n\n\t\t\t<div class=\"memberTooltip-actions\">\n\t\t\t<xf:contentcheck>\n\t\t\t\t<xf:macro id=\"member_macros::member_action_buttons\"\n\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t</xf:contentcheck>\n\t\t\t</div>\n\t\t</xf:if>\n\t</div>\n</div>\n</xf:if>\n\n<xf:if is=\"!$hasPermission\">\n\t<div class=\"memberTooltip\">\n\t\t<div class=\"memberTooltip-header\">\n\t\t\t<div class=\"memberTooltip-headerInfo\">\n\t\t\t\t<h4 class=\"memberTooltip-name\">{{ phrase('sylphian_tooltip_title') }}</h4>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class=\"memberTooltip-info\">\n\t\t\t<p class=\"blockMessage blockMessage--important\">{{ phrase('sylphian_tooltip_text') }}</p>\n\t\t</div>\n\t</div>\n</xf:if>\n"
}