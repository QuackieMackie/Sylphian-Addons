{
    "template": "member_tooltip",
    "description": "Hides user information if the person trying to view it is not logged in.",
    "execution_order": 10,
    "enabled": true,
    "action": "str_replace",
    "find": "<xf:css src=\"member_tooltip.less\" />\n\n<div class=\"tooltip-content-inner\">\n\t<div class=\"memberTooltip {{ $user.Profile.banner_date ? 'memberTooltip--withBanner' : '' }}\">\n\t\t<xf:profilebanner user=\"$user\" size=\"m\" class=\"memberTooltip-header\" toggle=\"memberTooltip--withBanner\">\n\t\t\t<span class=\"memberTooltip-avatar\">\n\t\t\t\t<xf:avatar user=\"{$user}\" size=\"m\" notooltip=\"true\" />\n\t\t\t</span>\n\t\t\t<div class=\"memberTooltip-headerInfo\">\n\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t<div class=\"memberTooltip-headerAction\">\n\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t<!--[XF:header_action_start]-->\n\t\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t\t<xf:button class=\"button--link button--small menuTrigger\"\n\t\t\t\t\t\t\t\tdata-xf-click=\"menu\"\n\t\t\t\t\t\t\t\taria-label=\"{{ phrase('more_options') }}\"\n\t\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\t\taria-haspopup=\"true\">\n\t\t\t\t\t\t\t\t<xf:fa icon=\"fa-cog\" />\n\t\t\t\t\t\t\t</xf:button>\n\n\t\t\t\t\t\t\t<div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\">\n\t\t\t\t\t\t\t\t<div class=\"menu-content\">\n\t\t\t\t\t\t\t\t\t<h3 class=\"menu-header\">{{ phrase('moderator_tools') }}</h3>\n\t\t\t\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t\t\t\t\t<xf:macro id=\"member_macros::moderator_menu_actions\"\n\t\t\t\t\t\t\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\t\t\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</xf:if>\n\t\t\t\t\t\t<!--[XF:header_action_end]-->\n\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t</div>\n\t\t\t\t</xf:if>\n\n\t\t\t\t<h4 class=\"memberTooltip-name\">\n\t\t\t\t\t<span class=\"memberTooltip-nameWrapper\">\n\t\t\t\t\t\t<xf:username user=\"$user\" rich=\"true\" notooltip=\"true\" />\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<xf:if is=\"$user.hasViewableUsernameHistory()\">\n\t\t\t\t\t\t<a class=\"memberTooltip-nameChangeIndicator\"\n\t\t\t\t\t\t\tdata-xf-click=\"menu\"\n\t\t\t\t\t\t\tdata-xf-init=\"tooltip\"\n\t\t\t\t\t\t\ttitle=\"{{ phrase('username_changed')|for_attr }}\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\taria-label=\"{{ phrase('username_changed')|for_attr }}\"><xf:fa icon=\"fa-history\" /></a>\n\t\t\t\t\t\t<div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\"\n\t\t\t\t\t\t\tdata-href=\"{{ link('members/username-history', $user, {'menu': 1}) }}\"\n\t\t\t\t\t\t\tdata-load-target=\".js-usernameHistoryBody\">\n\t\t\t\t\t\t\t<div class=\"menu-content\">\n\t\t\t\t\t\t\t\t<h3 class=\"menu-header\">{{ phrase('previous_usernames') }}</h3>\n\t\t\t\t\t\t\t\t<div class=\"js-usernameHistoryBody\">\n\t\t\t\t\t\t\t\t\t<div class=\"menu-row\">\n\t\t\t\t\t\t\t\t\t\t{{ phrase('loading...') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\t\t\t\t</h4>\n\n\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t<div class=\"memberTooltip-banners\">\n\t\t\t\t\t\t<xf:contentcheck><xf:userbanners user=\"$user\" /></xf:contentcheck>\n\t\t\t\t\t</div>\n\t\t\t\t</xf:if>\n\n\t\t\t\t<div class=\"memberTooltip-blurbContainer\">\n\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t\t\t<xf:userblurb user=\"$user\" tag=\"div\" />\n\t\t\t\t\t\t</xf:contentcheck>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\n\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t<dl class=\"pairs pairs--inline\">\n\t\t\t\t\t\t\t<dt>{{ phrase('joined') }}</dt>\n\t\t\t\t\t\t\t<dd><xf:date time=\"$user.register_date\" /></dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<xf:if contentcheck=\"true\">\n\t\t\t\t\t\t<div class=\"memberTooltip-blurb\">\n\t\t\t\t\t\t\t<dl class=\"pairs pairs--inline\">\n\t\t\t\t\t\t\t\t<dt>{{ phrase('last_seen') }}</dt>\n\t\t\t\t\t\t\t\t<dd dir=\"auto\">\n\t\t\t\t\t\t\t\t\t<xf:contentcheck><xf:useractivity user=\"$user\" class=\"pairs--plainLabel\" /></xf:contentcheck>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</xf:if>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</xf:profilebanner>\n\t\t<div class=\"memberTooltip-info\">\n\t\t\t<div class=\"memberTooltip-stats\">\n\t\t\t\t<div class=\"pairJustifier\">\n\t\t\t\t\t<xf:macro id=\"member_macros::member_stat_pairs\"\n\t\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<xf:if contentcheck=\"true\">\n\t\t\t<hr class=\"memberTooltip-separator\" />\n\n\t\t\t<div class=\"memberTooltip-actions\">\n\t\t\t<xf:contentcheck>\n\t\t\t\t<xf:macro id=\"member_macros::member_action_buttons\"\n\t\t\t\t\targ-user=\"{$user}\"\n\t\t\t\t\targ-context=\"tooltip\" />\n\t\t\t</xf:contentcheck>\n\t\t\t</div>\n\t\t</xf:if>\n\t</div>\n</div>",
    "replace": "<xf:css src=\"member_tooltip.less\" />\n\n<xf:if is=\"$hasPermission\">\n  <div class=\"tooltip-content-inner\">\n    <div class=\"memberTooltip {{ $user.Profile.banner_date ? 'memberTooltip--withBanner' : '' }}\">\n      <xf:profilebanner user=\"$user\" size=\"m\" class=\"memberTooltip-header\" toggle=\"memberTooltip--withBanner\">\n\t\t\t<span class=\"memberTooltip-avatar\">\n\t\t\t\t<xf:avatar user=\"{$user}\" size=\"m\" notooltip=\"true\" />\n\t\t\t</span>\n        <div class=\"memberTooltip-headerInfo\">\n          <xf:if contentcheck=\"true\">\n            <div class=\"memberTooltip-headerAction\">\n              <xf:contentcheck>\n                <!--[XF:header_action_start]-->\n                <xf:if contentcheck=\"true\">\n                  <xf:button class=\"button--link button--small menuTrigger\"\n                             data-xf-click=\"menu\"\n                             aria-label=\"{{ phrase('more_options') }}\"\n                             aria-expanded=\"false\"\n                             aria-haspopup=\"true\">\n                    <xf:fa icon=\"fa-cog\" />\n                  </xf:button>\n\n                  <div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\">\n                    <div class=\"menu-content\">\n                      <h3 class=\"menu-header\">{{ phrase('moderator_tools') }}</h3>\n                      <xf:contentcheck>\n                        <xf:macro id=\"member_macros::moderator_menu_actions\"\n                                  arg-user=\"{$user}\"\n                                  arg-context=\"tooltip\" />\n                      </xf:contentcheck>\n                    </div>\n                  </div>\n                </xf:if>\n                <!--[XF:header_action_end]-->\n              </xf:contentcheck>\n            </div>\n          </xf:if>\n\n          <h4 class=\"memberTooltip-name\">\n\t\t\t\t\t<span class=\"memberTooltip-nameWrapper\">\n\t\t\t\t\t\t<xf:username user=\"$user\" rich=\"true\" notooltip=\"true\" />\n\t\t\t\t\t</span>\n\n            <xf:if is=\"$user.hasViewableUsernameHistory()\">\n              <a class=\"memberTooltip-nameChangeIndicator\"\n                 data-xf-click=\"menu\"\n                 data-xf-init=\"tooltip\"\n                 title=\"{{ phrase('username_changed')|for_attr }}\"\n                 role=\"button\"\n                 tabindex=\"0\"\n                 aria-expanded=\"false\"\n                 aria-haspopup=\"true\"\n                 aria-label=\"{{ phrase('username_changed')|for_attr }}\"><xf:fa icon=\"fa-history\" /></a>\n              <div class=\"menu\" data-menu=\"menu\" aria-hidden=\"true\"\n                   data-href=\"{{ link('members/username-history', $user, {'menu': 1}) }}\"\n                   data-load-target=\".js-usernameHistoryBody\">\n                <div class=\"menu-content\">\n                  <h3 class=\"menu-header\">{{ phrase('previous_usernames') }}</h3>\n                  <div class=\"js-usernameHistoryBody\">\n                    <div class=\"menu-row\">\n                      {{ phrase('loading...') }}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </xf:if>\n          </h4>\n\n          <xf:if contentcheck=\"true\">\n            <div class=\"memberTooltip-banners\">\n              <xf:contentcheck><xf:userbanners user=\"$user\" /></xf:contentcheck>\n            </div>\n          </xf:if>\n\n          <div class=\"memberTooltip-blurbContainer\">\n            <xf:if contentcheck=\"true\">\n              <div class=\"memberTooltip-blurb\">\n                <xf:contentcheck>\n                  <xf:userblurb user=\"$user\" tag=\"div\" />\n                </xf:contentcheck>\n              </div>\n            </xf:if>\n\n            <div class=\"memberTooltip-blurb\">\n              <dl class=\"pairs pairs--inline\">\n                <dt>{{ phrase('joined') }}</dt>\n                <dd><xf:date time=\"$user.register_date\" /></dd>\n              </dl>\n            </div>\n\n            <xf:if contentcheck=\"true\">\n              <div class=\"memberTooltip-blurb\">\n                <dl class=\"pairs pairs--inline\">\n                  <dt>{{ phrase('last_seen') }}</dt>\n                  <dd dir=\"auto\">\n                    <xf:contentcheck><xf:useractivity user=\"$user\" class=\"pairs--plainLabel\" /></xf:contentcheck>\n                  </dd>\n                </dl>\n              </div>\n            </xf:if>\n          </div>\n        </div>\n      </xf:profilebanner>\n      <div class=\"memberTooltip-info\">\n        <div class=\"memberTooltip-stats\">\n          <div class=\"pairJustifier\">\n            <xf:macro id=\"member_macros::member_stat_pairs\"\n                      arg-user=\"{$user}\"\n                      arg-context=\"tooltip\" />\n          </div>\n        </div>\n      </div>\n\n      <xf:if contentcheck=\"true\">\n        <hr class=\"memberTooltip-separator\" />\n\n        <div class=\"memberTooltip-actions\">\n          <xf:contentcheck>\n            <xf:macro id=\"member_macros::member_action_buttons\"\n                      arg-user=\"{$user}\"\n                      arg-context=\"tooltip\" />\n          </xf:contentcheck>\n        </div>\n      </xf:if>\n    </div>\n  </div>\n</xf:if>\n\n<xf:if is=\"!$hasPermission\">\n  <div class=\"memberTooltip\">\n    <div class=\"memberTooltip-header\">\n      <div class=\"memberTooltip-headerInfo\">\n        <h4 class=\"memberTooltip-name\">\n          {{ phrase('only_members_can_view_user_profiles_header') }}\n        </h4>\n      </div>\n    </div>\n\n    <div class=\"memberTooltip-info\">\n      <p class=\"blockMessage blockMessage--important\">\n        {{ phrase('only_members_can_view_user_profiles') }}\n      </p>\n    </div>\n  </div>\n</xf:if>"
}